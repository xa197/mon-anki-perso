{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function HomeView(_ref){let{navigateTo,allCards,itemsData}=_ref;const[selectedItem,setSelectedItem]=useState('');const[workshopText,setWorkshopText]=useState('');// --- MODIFICATION ICI : TRI ET AJOUT DE L'ITEM 500 ---\n// On récupère la liste unique des items (decks)\nconst itemNames=new Set(allCards.map(c=>c.deck).filter(Boolean));// On convertit en tableau pour le tri\nlet sortedItems=Array.from(itemNames);// On applique votre logique de tri intelligente\nsortedItems.sort((a,b)=>parseInt(a.split(':')[0],10)-parseInt(b.split(':')[0],10));// On ajoute notre item \"fourre-tout\" au début de la liste\nsortedItems.unshift(\"500: Divers\");// --- FIN DE LA MODIFICATION ---\nuseEffect(()=>{if(selectedItem&&itemsData[selectedItem]){setWorkshopText(itemsData[selectedItem]);}else{setWorkshopText('');}},[selectedItem,itemsData]);const handleSaveWorkshopText=async()=>{if(!selectedItem){alert('Veuillez choisir un item.');return;}try{await fetch('/api/items-data',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({item:selectedItem,text:workshopText})});alert('Texte enregistré !');}catch(e){alert('Échec de la sauvegarde.');}};return/*#__PURE__*/_jsx(\"div\",{id:\"home-view\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Anki Perso\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('review'),className:\"home-btn\",children:\"R\\xE9viser les cartes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('manage'),className:\"home-btn\",children:\"Ajouter des cartes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('library'),className:\"home-btn\",children:\"Consulter la Biblioth\\xE8que\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"workshop-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Atelier de cr\\xE9ation rapide\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Choisissez un item pour y ajouter rapidement des notes.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"workshop-form\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedItem,onChange:e=>setSelectedItem(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Choisir un item --\"}),sortedItems.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item))]}),/*#__PURE__*/_jsx(\"textarea\",{value:workshopText,onChange:e=>setWorkshopText(e.target.value),placeholder:\"Collez vos phrases ou notes ici...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveWorkshopText,children:\"Enregistrer le texte\"})]})]})]})});}export default HomeView;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","HomeView","_ref","navigateTo","allCards","itemsData","selectedItem","setSelectedItem","workshopText","setWorkshopText","itemNames","Set","map","c","deck","filter","Boolean","sortedItems","Array","from","sort","a","b","parseInt","split","unshift","handleSaveWorkshopText","alert","fetch","method","headers","body","JSON","stringify","item","text","e","id","children","className","onClick","value","onChange","target","placeholder"],"sources":["/Users/xavier/mon-anki-perso/src/components/HomeView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nfunction HomeView({ navigateTo, allCards, itemsData }) {\n  \n  const [selectedItem, setSelectedItem] = useState('');\n  const [workshopText, setWorkshopText] = useState('');\n\n  // --- MODIFICATION ICI : TRI ET AJOUT DE L'ITEM 500 ---\n  // On récupère la liste unique des items (decks)\n  const itemNames = new Set(allCards.map(c => c.deck).filter(Boolean));\n  // On convertit en tableau pour le tri\n  let sortedItems = Array.from(itemNames);\n  // On applique votre logique de tri intelligente\n  sortedItems.sort((a, b) => parseInt(a.split(':')[0], 10) - parseInt(b.split(':')[0], 10));\n  // On ajoute notre item \"fourre-tout\" au début de la liste\n  sortedItems.unshift(\"500: Divers\");\n  // --- FIN DE LA MODIFICATION ---\n\n  useEffect(() => {\n    if (selectedItem && itemsData[selectedItem]) {\n      setWorkshopText(itemsData[selectedItem]);\n    } else {\n      setWorkshopText('');\n    }\n  }, [selectedItem, itemsData]); \n\n  const handleSaveWorkshopText = async () => {\n    if (!selectedItem) {\n      alert('Veuillez choisir un item.');\n      return;\n    }\n    try {\n      await fetch('/api/items-data', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ item: selectedItem, text: workshopText })\n      });\n      alert('Texte enregistré !');\n    } catch (e) {\n      alert('Échec de la sauvegarde.');\n    }\n  };\n\n  return (\n    <div id=\"home-view\">\n        <div className=\"home-container\">\n            <h1>Mon Anki Perso</h1>\n            <div className=\"home-actions\">\n                <button onClick={() => navigateTo('review')} className=\"home-btn\">Réviser les cartes</button>\n                <button onClick={() => navigateTo('manage')} className=\"home-btn\">Ajouter des cartes</button>\n                <button onClick={() => navigateTo('library')} className=\"home-btn\">Consulter la Bibliothèque</button> \n            </div>\n            <div className=\"workshop-container\">\n                <h2>Atelier de création rapide</h2>\n                <p>Choisissez un item pour y ajouter rapidement des notes.</p>\n                <div className=\"workshop-form\">\n                    <select value={selectedItem} onChange={(e) => setSelectedItem(e.target.value)}>\n                        <option value=\"\">-- Choisir un item --</option>\n                        {sortedItems.map(item => (\n                            <option key={item} value={item}>{item}</option>\n                        ))}\n                    </select>\n\n                    <textarea \n                      value={workshopText} \n                      onChange={(e) => setWorkshopText(e.target.value)}\n                      placeholder=\"Collez vos phrases ou notes ici...\"\n                    />\n                    \n                    <button onClick={handleSaveWorkshopText}>Enregistrer le texte</button>\n                </div>\n            </div>\n        </div>\n    </div>\n  );\n}\n\nexport default HomeView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}