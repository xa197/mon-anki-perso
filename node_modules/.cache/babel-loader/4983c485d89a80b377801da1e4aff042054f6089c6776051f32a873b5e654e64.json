{"ast":null,"code":"import React,{useState,useEffect}from'react';import HomeView from'./components/HomeView';import LibraryView from'./components/LibraryView';import QuizView from'./components/QuizView';// ON IMPORTE LA VUE DU QUIZ\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[currentView,setCurrentView]=useState('home');const[allCards,setAllCards]=useState([]);const[itemsData,setItemsData]=useState({});// --- NOUVEAUX ÉTATS ---\nconst[quizQuestions,setQuizQuestions]=useState([]);const[isLoading,setIsLoading]=useState(false);const loadInitialData=async()=>{/* ... (ne change pas) ... */try{const[cardsRes,itemsDataRes]=await Promise.all([fetch('/api/cards'),fetch('/api/items-data')]);if(!cardsRes.ok||!itemsDataRes.ok){throw new Error('Erreur serveur');}setAllCards(await cardsRes.json());setItemsData(await itemsDataRes.json());}catch(e){console.error(\"Erreur chargement:\",e);}};useEffect(()=>{loadInitialData();},[]);const handleSaveItemData=async(item,text)=>{/* ... (ne change pas) ... */try{await fetch('/api/items-data',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({item,text})});await loadInitialData();alert('Texte enregistré !');}catch(e){alert('Échec.');}};const renderCurrentView=()=>{switch(currentView){case'library':return/*#__PURE__*/_jsx(LibraryView,{navigateTo:setCurrentView,allCards:allCards,itemsData:itemsData// On passe les fonctions pour mettre à jour l'état du quiz\n,onSetQuiz:setQuizQuestions,onSetLoading:setIsLoading});case'quiz':// On affiche un spinner si c'est en cours de chargement\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{id:\"loading-spinner\"});}return/*#__PURE__*/_jsx(QuizView,{navigateTo:setCurrentView,questions:quizQuestions});// ... (les autres vues ne changent pas)\ncase'review':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Page de R\\xE9vision\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('home'),children:\"\\u2190 Accueil\"})]});case'manage':return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Page de Gestion\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('home'),children:\"\\u2190 Accueil\"})]});case'home':default:return/*#__PURE__*/_jsx(HomeView,{navigateTo:setCurrentView,allCards:allCards,itemsData:itemsData,onSaveItem:handleSaveItemData});}};return/*#__PURE__*/_jsx(\"div\",{className:\"AppContainer\",children:renderCurrentView()});}export default App;","map":{"version":3,"names":["React","useState","useEffect","HomeView","LibraryView","QuizView","jsx","_jsx","jsxs","_jsxs","App","currentView","setCurrentView","allCards","setAllCards","itemsData","setItemsData","quizQuestions","setQuizQuestions","isLoading","setIsLoading","loadInitialData","cardsRes","itemsDataRes","Promise","all","fetch","ok","Error","json","e","console","error","handleSaveItemData","item","text","method","headers","body","JSON","stringify","alert","renderCurrentView","navigateTo","onSetQuiz","onSetLoading","id","questions","children","onClick","onSaveItem","className"],"sources":["/Users/xavier/mon-anki-perso/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport HomeView from './components/HomeView';\nimport LibraryView from './components/LibraryView';\nimport QuizView from './components/QuizView'; // ON IMPORTE LA VUE DU QUIZ\n\nfunction App() {\n  const [currentView, setCurrentView] = useState('home');\n  const [allCards, setAllCards] = useState([]);\n  const [itemsData, setItemsData] = useState({});\n  // --- NOUVEAUX ÉTATS ---\n  const [quizQuestions, setQuizQuestions] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const loadInitialData = async () => { /* ... (ne change pas) ... */\n    try {\n      const [cardsRes, itemsDataRes] = await Promise.all([ fetch('/api/cards'), fetch('/api/items-data') ]);\n      if (!cardsRes.ok || !itemsDataRes.ok) { throw new Error('Erreur serveur'); }\n      setAllCards(await cardsRes.json());\n      setItemsData(await itemsDataRes.json());\n    } catch (e) { console.error(\"Erreur chargement:\", e); }\n  };\n  \n  useEffect(() => { loadInitialData(); }, []);\n\n  const handleSaveItemData = async (item, text) => { /* ... (ne change pas) ... */\n    try {\n      await fetch('/api/items-data', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ item, text }) });\n      await loadInitialData();\n      alert('Texte enregistré !');\n    } catch (e) { alert('Échec.'); }\n  };\n\n  const renderCurrentView = () => {\n    switch (currentView) {\n      case 'library':\n        return (\n          <LibraryView \n            navigateTo={setCurrentView} \n            allCards={allCards}\n            itemsData={itemsData}\n            // On passe les fonctions pour mettre à jour l'état du quiz\n            onSetQuiz={setQuizQuestions}\n            onSetLoading={setIsLoading}\n          />\n        );\n      case 'quiz':\n        // On affiche un spinner si c'est en cours de chargement\n        if (isLoading) {\n          return <div id=\"loading-spinner\"></div>;\n        }\n        return <QuizView navigateTo={setCurrentView} questions={quizQuestions} />;\n      \n      // ... (les autres vues ne changent pas)\n      case 'review': return (<div><h2>Page de Révision</h2><button onClick={() => setCurrentView('home')}>← Accueil</button></div>);\n      case 'manage': return (<div><h2>Page de Gestion</h2><button onClick={() => setCurrentView('home')}>← Accueil</button></div>);\n      case 'home':\n      default:\n        return (\n          <HomeView \n            navigateTo={setCurrentView} \n            allCards={allCards}\n            itemsData={itemsData}\n            onSaveItem={handleSaveItemData} \n          />\n        );\n    }\n  };\n\n  return ( <div className=\"AppContainer\">{renderCurrentView()}</div> );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}