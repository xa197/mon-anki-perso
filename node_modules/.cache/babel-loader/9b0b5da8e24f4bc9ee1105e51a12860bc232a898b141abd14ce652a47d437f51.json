{"ast":null,"code":"var _jsxFileName = \"/Users/xavier/mon-anki-perso optimisation/src/components/AtelierView.js\",\n  _s = $RefreshSig$();\n// Contenu complet pour AtelierView.js - Version MISE À JOUR\n\nimport React, { useState, useEffect } from 'react';\n\n// Reçoit une fonction pour revenir à l'accueil\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AtelierView({\n  navigateTo\n}) {\n  _s();\n  const [items, setItems] = useState([]);\n  const [newItemName, setNewItemName] = useState('');\n  const [error, setError] = useState('');\n\n  // Fonction pour charger la liste des items depuis le serveur\n  const fetchItems = async () => {\n    try {\n      const response = await fetch('/api/cards');\n      if (!response.ok) throw new Error('Erreur réseau');\n      const cards = await response.json();\n      // On extrait les noms uniques des \"decks\" pour avoir la liste des items\n      const uniqueItems = [...new Set(cards.map(card => card.deck))];\n      setItems(uniqueItems);\n    } catch (err) {\n      setError('Impossible de charger les items.');\n    }\n  };\n\n  // useEffect se déclenche une fois au chargement du composant pour charger les données\n  useEffect(() => {\n    fetchItems();\n  }, []);\n  const handleAddItem = async e => {\n    e.preventDefault(); // Empêche le rechargement de la page\n    if (!newItemName.trim()) {\n      setError('Le nom de l\\'item ne peut pas être vide.');\n      return;\n    }\n    try {\n      const response = await fetch('/api/add-item', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          newItemName: newItemName.trim()\n        })\n      });\n      if (response.status === 409) {\n        setError('Cet item existe déjà.');\n      } else if (!response.ok) {\n        throw new Error('Erreur lors de l\\'ajout.');\n      } else {\n        setNewItemName(''); // Vide le champ de saisie\n        setError(''); // Efface les erreurs précédentes\n        await fetchItems(); // Rafraîchit la liste des items\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  const handleDeleteItem = async itemName => {\n    // On demande confirmation avant une action destructive\n    if (!window.confirm(`Êtes-vous sûr de vouloir supprimer l'item \"${itemName}\" et toutes ses cartes ?`)) {\n      return;\n    }\n    try {\n      const response = await fetch(`/api/items/${encodeURIComponent(itemName)}`, {\n        method: 'DELETE'\n      });\n      if (!response.ok) {\n        throw new Error('Erreur lors de la suppression.');\n      }\n      setError('');\n      await fetchItems(); // Rafraîchit la liste\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"view-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quiz-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigateTo('accueil'),\n        children: \"\\u2190 Retour\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Atelier de Gestion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item-management-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Ajouter un nouvel item\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAddItem,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newItemName,\n          onChange: e => setNewItemName(e.target.value),\n          placeholder: \"Nom du nouvel item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Ajouter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"item-management-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Items existants\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"items-list\",\n        children: items.length > 0 ? items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteItem(item),\n            className: \"delete-btn\",\n            children: \"Supprimer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 29\n          }, this)]\n        }, item, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Aucun item n'a \\xE9t\\xE9 cr\\xE9\\xE9 pour le moment.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n_s(AtelierView, \"Wk69aN6TvsJkh9VL+5K9HwiYV2Y=\");\n_c = AtelierView;\nexport default AtelierView;\nvar _c;\n$RefreshReg$(_c, \"AtelierView\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","AtelierView","navigateTo","_s","items","setItems","newItemName","setNewItemName","error","setError","fetchItems","response","fetch","ok","Error","cards","json","uniqueItems","Set","map","card","deck","err","handleAddItem","e","preventDefault","trim","method","headers","body","JSON","stringify","status","message","handleDeleteItem","itemName","window","confirm","encodeURIComponent","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","length","item","_c","$RefreshReg$"],"sources":["/Users/xavier/mon-anki-perso optimisation/src/components/AtelierView.js"],"sourcesContent":["// Contenu complet pour AtelierView.js - Version MISE À JOUR\n\nimport React, { useState, useEffect } from 'react';\n\n// Reçoit une fonction pour revenir à l'accueil\nfunction AtelierView({ navigateTo }) {\n    const [items, setItems] = useState([]);\n    const [newItemName, setNewItemName] = useState('');\n    const [error, setError] = useState('');\n\n    // Fonction pour charger la liste des items depuis le serveur\n    const fetchItems = async () => {\n        try {\n            const response = await fetch('/api/cards');\n            if (!response.ok) throw new Error('Erreur réseau');\n            const cards = await response.json();\n            // On extrait les noms uniques des \"decks\" pour avoir la liste des items\n            const uniqueItems = [...new Set(cards.map(card => card.deck))];\n            setItems(uniqueItems);\n        } catch (err) {\n            setError('Impossible de charger les items.');\n        }\n    };\n\n    // useEffect se déclenche une fois au chargement du composant pour charger les données\n    useEffect(() => {\n        fetchItems();\n    }, []);\n\n    const handleAddItem = async (e) => {\n        e.preventDefault(); // Empêche le rechargement de la page\n        if (!newItemName.trim()) {\n            setError('Le nom de l\\'item ne peut pas être vide.');\n            return;\n        }\n\n        try {\n            const response = await fetch('/api/add-item', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ newItemName: newItemName.trim() }),\n            });\n\n            if (response.status === 409) {\n                setError('Cet item existe déjà.');\n            } else if (!response.ok) {\n                throw new Error('Erreur lors de l\\'ajout.');\n            } else {\n                setNewItemName(''); // Vide le champ de saisie\n                setError(''); // Efface les erreurs précédentes\n                await fetchItems(); // Rafraîchit la liste des items\n            }\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n    \n    const handleDeleteItem = async (itemName) => {\n        // On demande confirmation avant une action destructive\n        if (!window.confirm(`Êtes-vous sûr de vouloir supprimer l'item \"${itemName}\" et toutes ses cartes ?`)) {\n            return;\n        }\n\n        try {\n            const response = await fetch(`/api/items/${encodeURIComponent(itemName)}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                throw new Error('Erreur lors de la suppression.');\n            }\n            setError('');\n            await fetchItems(); // Rafraîchit la liste\n        } catch (err) {\n            setError(err.message);\n        }\n    };\n\n\n    return (\n        <div className=\"view-container\">\n            <div className=\"quiz-header\">\n                <button onClick={() => navigateTo('accueil')}>← Retour</button>\n                <h1>Atelier de Gestion</h1>\n            </div>\n\n            {/* Section pour ajouter un nouvel item */}\n            <div className=\"item-management-section\">\n                <h2>Ajouter un nouvel item</h2>\n                <form onSubmit={handleAddItem}>\n                    <input\n                        type=\"text\"\n                        value={newItemName}\n                        onChange={(e) => setNewItemName(e.target.value)}\n                        placeholder=\"Nom du nouvel item\"\n                    />\n                    <button type=\"submit\">Ajouter</button>\n                </form>\n            </div>\n\n            {/* Section pour lister et supprimer les items existants */}\n            <div className=\"item-management-section\">\n                <h2>Items existants</h2>\n                {error && <p className=\"error-message\">{error}</p>}\n                <ul className=\"items-list\">\n                    {items.length > 0 ? items.map(item => (\n                        <li key={item}>\n                            <span>{item}</span>\n                            <button onClick={() => handleDeleteItem(item)} className=\"delete-btn\">Supprimer</button>\n                        </li>\n                    )) : (\n                        <p>Aucun item n'a été créé pour le moment.</p>\n                    )}\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default AtelierView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}