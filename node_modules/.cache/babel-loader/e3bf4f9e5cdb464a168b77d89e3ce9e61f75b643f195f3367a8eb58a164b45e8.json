{"ast":null,"code":"import React,{useState}from'react';// On ajoute la nouvelle prop `onGenerateCards`\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function LibraryView(_ref){let{navigateTo,allCards,itemsData,onSetQuiz,onSetLoading,onGenerateCards}=_ref;const[selectedItem,setSelectedItem]=useState('');const[numQCM,setNumQCM]=useState(3);const[numQRU,setNumQRU]=useState(2);const sortedItems=Array.from(new Set(allCards.map(c=>c.deck).filter(Boolean))).sort((a,b)=>parseInt(a.split(':')[0],10)-parseInt(b.split(':')[0],10));sortedItems.unshift(\"500: Divers\");const handleGenerateQuiz=async()=>{if(!selectedItem||!itemsData[selectedItem])return;onSetLoading(true);navigateTo('quiz');try{const response=await fetch('/api/generate-questions',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text:itemsData[selectedItem],numQCM,numQRU})});if(!response.ok)throw new Error('Erreur de l\\'API');const quizData=await response.json();onSetQuiz(quizData.questions);}catch(error){console.error(\"Erreur génération quiz:\",error);onSetQuiz([]);}finally{onSetLoading(false);}};// --- NOUVELLE FONCTION ---\n// Fonction qui sera appelée au clic sur le bouton \"Créer des cartes\"\nconst handleCreateCardsClick=()=>{if(selectedItem&&itemsData[selectedItem]){// On appelle la fonction du parent (App.js) pour qu'il gère la logique\nonGenerateCards(selectedItem,itemsData[selectedItem]);}};return/*#__PURE__*/_jsxs(\"div\",{id:\"library-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"library-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('home'),children:\"\\u2190 Accueil\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"library-selector-container\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"library-item-selector\",children:\"Consulter l'item :\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"library-item-selector\",value:selectedItem,onChange:e=>setSelectedItem(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Choisir un item --\"}),sortedItems.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item))]})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"library-content-display\",children:selectedItem?/*#__PURE__*/_jsx(\"p\",{children:itemsData[selectedItem]||'Aucune note enregistrée pour cet item.'}):/*#__PURE__*/_jsx(\"p\",{className:\"placeholder-text\",children:\"Veuillez s\\xE9lectionner un item.\"})}),selectedItem&&itemsData[selectedItem]&&/*#__PURE__*/_jsxs(\"div\",{className:\"generation-options\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"QCM : \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:numQCM,onChange:e=>setNumQCM(parseInt(e.target.value))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"QRU : \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:numQRU,onChange:e=>setNumQRU(parseInt(e.target.value))})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"library-actions-container\",children:selectedItem&&itemsData[selectedItem]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"ia-btn\",onClick:handleGenerateQuiz,children:\"S'entra\\xEEner (Quiz IA)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ia-btn success\",onClick:handleCreateCardsClick,children:\"Cr\\xE9er des cartes (IA)\"})]})})]});}export default LibraryView;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LibraryView","_ref","navigateTo","allCards","itemsData","onSetQuiz","onSetLoading","onGenerateCards","selectedItem","setSelectedItem","numQCM","setNumQCM","numQRU","setNumQRU","sortedItems","Array","from","Set","map","c","deck","filter","Boolean","sort","a","b","parseInt","split","unshift","handleGenerateQuiz","response","fetch","method","headers","body","JSON","stringify","text","ok","Error","quizData","json","questions","error","console","handleCreateCardsClick","id","children","className","onClick","htmlFor","value","onChange","e","target","item","type","min"],"sources":["/Users/xavier/mon-anki-perso/src/components/LibraryView.js"],"sourcesContent":["import React, { useState } from 'react';\n\n// On ajoute la nouvelle prop `onGenerateCards`\nfunction LibraryView({ navigateTo, allCards, itemsData, onSetQuiz, onSetLoading, onGenerateCards }) {\n  const [selectedItem, setSelectedItem] = useState('');\n  const [numQCM, setNumQCM] = useState(3);\n  const [numQRU, setNumQRU] = useState(2);\n\n  const sortedItems = Array.from(new Set(allCards.map(c => c.deck).filter(Boolean)))\n    .sort((a, b) => parseInt(a.split(':')[0], 10) - parseInt(b.split(':')[0], 10));\n  sortedItems.unshift(\"500: Divers\");\n\n  const handleGenerateQuiz = async () => {\n    if (!selectedItem || !itemsData[selectedItem]) return;\n    onSetLoading(true);\n    navigateTo('quiz');\n    try {\n      const response = await fetch('/api/generate-questions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ text: itemsData[selectedItem], numQCM, numQRU })\n      });\n      if (!response.ok) throw new Error('Erreur de l\\'API');\n      const quizData = await response.json();\n      onSetQuiz(quizData.questions);\n    } catch (error) {\n      console.error(\"Erreur génération quiz:\", error);\n      onSetQuiz([]);\n    } finally {\n      onSetLoading(false);\n    }\n  };\n\n  // --- NOUVELLE FONCTION ---\n  // Fonction qui sera appelée au clic sur le bouton \"Créer des cartes\"\n  const handleCreateCardsClick = () => {\n    if (selectedItem && itemsData[selectedItem]) {\n      // On appelle la fonction du parent (App.js) pour qu'il gère la logique\n      onGenerateCards(selectedItem, itemsData[selectedItem]);\n    }\n  };\n\n  return (\n    <div id=\"library-view\">\n      <div className=\"library-header\">\n        <button onClick={() => navigateTo('home')}>← Accueil</button>\n        <div className=\"library-selector-container\">\n          <label htmlFor=\"library-item-selector\">Consulter l'item :</label>\n          <select id=\"library-item-selector\" value={selectedItem} onChange={e => setSelectedItem(e.target.value)}>\n            <option value=\"\">-- Choisir un item --</option>\n            {sortedItems.map(item => (<option key={item} value={item}>{item}</option>))}\n          </select>\n        </div>\n      </div>\n\n      <div id=\"library-content-display\">\n        {selectedItem ? (<p>{itemsData[selectedItem] || 'Aucune note enregistrée pour cet item.'}</p>) : (<p className=\"placeholder-text\">Veuillez sélectionner un item.</p>)}\n      </div>\n      \n      {selectedItem && itemsData[selectedItem] && (\n        <div className=\"generation-options\">\n          <label>QCM : <input type=\"number\" min=\"0\" value={numQCM} onChange={e => setNumQCM(parseInt(e.target.value))} /></label>\n          <label>QRU : <input type=\"number\" min=\"0\" value={numQRU} onChange={e => setNumQRU(parseInt(e.target.value))} /></label>\n        </div>\n      )}\n\n      <div id=\"library-actions-container\">\n        {selectedItem && itemsData[selectedItem] && (\n          <>\n            <button className=\"ia-btn\" onClick={handleGenerateQuiz}>S'entraîner (Quiz IA)</button>\n            {/* On lie notre nouvelle fonction au clic */}\n            <button className=\"ia-btn success\" onClick={handleCreateCardsClick}>Créer des cartes (IA)</button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default LibraryView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}