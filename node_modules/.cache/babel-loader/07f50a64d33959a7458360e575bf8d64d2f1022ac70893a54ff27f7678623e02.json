{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function QuizView(_ref){let{navigateTo,questions,onQuizComplete}=_ref;const[currentQuestionIndex,setCurrentQuestionIndex]=useState(0);const[selectedAnswer,setSelectedAnswer]=useState(null);const[feedback,setFeedback]=useState('');const[score,setScore]=useState(0);const[quizFinished,setQuizFinished]=useState(false);const[sessionResults,setSessionResults]=useState([]);if(!questions||questions.length===0){return/*#__PURE__*/_jsxs(\"div\",{id:\"quiz-view\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Erreur\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Aucune question n'a pu \\xEAtre g\\xE9n\\xE9r\\xE9e.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('library'),children:\"Retour \\xE0 la biblioth\\xE8que\"})]});}const currentQuestion=questions[currentQuestionIndex];const handleAnswerClick=answer=>{if(selectedAnswer)return;const isCorrect=answer===currentQuestion.answer;setSelectedAnswer(answer);if(isCorrect){setFeedback('Bonne réponse !');setScore(s=>s+1);}else{setFeedback(\"Mauvaise r\\xE9ponse. La bonne r\\xE9ponse \\xE9tait : \".concat(currentQuestion.answer));}setSessionResults(prevResults=>[...prevResults,{question:currentQuestion.question,userAnswer:answer,isCorrect}]);};const handleNextQuestion=()=>{if(currentQuestionIndex<questions.length-1){setSelectedAnswer(null);setFeedback('');setCurrentQuestionIndex(currentQuestionIndex+1);}else{onQuizComplete([...sessionResults,{question:currentQuestion.question,userAnswer:selectedAnswer,isCorrect:selectedAnswer===currentQuestion.answer}]);setQuizFinished(true);}};if(quizFinished){return/*#__PURE__*/_jsxs(\"div\",{id:\"quiz-results-view\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quiz Termin\\xE9 !\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Votre score est de : \",score,\" / \",questions.length]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('library'),children:\"Retour \\xE0 la Biblioth\\xE8que\"})]});}return/*#__PURE__*/_jsxs(\"div\",{id:\"quiz-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quiz-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('library'),children:\"\\u2190 Biblioth\\xE8que\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Quiz\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"quiz-progress-bar\",children:/*#__PURE__*/_jsx(\"div\",{id:\"quiz-progress-value\",style:{width:\"\".concat((currentQuestionIndex+1)/questions.length*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{id:\"quiz-container\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"quiz-question-text\",children:currentQuestion.question}),/*#__PURE__*/_jsx(\"div\",{id:\"quiz-options-container\",children:currentQuestion.options.map((option,index)=>{let buttonClass='';if(selectedAnswer){if(option===currentQuestion.answer){buttonClass='correct';}else if(option===selectedAnswer){buttonClass='incorrect';}}return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAnswerClick(option),className:buttonClass,disabled:!!selectedAnswer,children:option},index);})}),/*#__PURE__*/_jsx(\"div\",{id:\"quiz-feedback\",children:feedback}),selectedAnswer&&/*#__PURE__*/_jsx(\"button\",{id:\"next-question-btn\",onClick:handleNextQuestion,children:\"Question suivante \\u2192\"})]})]});}export default QuizView;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","QuizView","_ref","navigateTo","questions","onQuizComplete","currentQuestionIndex","setCurrentQuestionIndex","selectedAnswer","setSelectedAnswer","feedback","setFeedback","score","setScore","quizFinished","setQuizFinished","sessionResults","setSessionResults","length","id","children","onClick","currentQuestion","handleAnswerClick","answer","isCorrect","s","concat","prevResults","question","userAnswer","handleNextQuestion","className","style","width","options","map","option","index","buttonClass","disabled"],"sources":["/Users/xavier/mon-anki-perso/src/components/QuizView.js"],"sourcesContent":["import React, { useState } from 'react';\n\nfunction QuizView({ navigateTo, questions, onQuizComplete }) {\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n  const [selectedAnswer, setSelectedAnswer] = useState(null);\n  const [feedback, setFeedback] = useState('');\n  const [score, setScore] = useState(0);\n  const [quizFinished, setQuizFinished] = useState(false);\n  const [sessionResults, setSessionResults] = useState([]);\n\n  if (!questions || questions.length === 0) {\n    return (\n      <div id=\"quiz-view\">\n        <h2>Erreur</h2>\n        <p>Aucune question n'a pu être générée.</p>\n        <button onClick={() => navigateTo('library')}>Retour à la bibliothèque</button>\n      </div>\n    );\n  }\n\n  const currentQuestion = questions[currentQuestionIndex];\n\n  const handleAnswerClick = (answer) => {\n    if (selectedAnswer) return;\n    const isCorrect = answer === currentQuestion.answer;\n    setSelectedAnswer(answer);\n    if (isCorrect) {\n      setFeedback('Bonne réponse !');\n      setScore(s => s + 1);\n    } else {\n      setFeedback(`Mauvaise réponse. La bonne réponse était : ${currentQuestion.answer}`);\n    }\n    setSessionResults(prevResults => [\n      ...prevResults,\n      { question: currentQuestion.question, userAnswer: answer, isCorrect }\n    ]);\n  };\n\n  const handleNextQuestion = () => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setSelectedAnswer(null);\n      setFeedback('');\n      setCurrentQuestionIndex(currentQuestionIndex + 1);\n    } else {\n      onQuizComplete([...sessionResults, { question: currentQuestion.question, userAnswer: selectedAnswer, isCorrect: selectedAnswer === currentQuestion.answer }]);\n      setQuizFinished(true);\n    }\n  };\n\n  if (quizFinished) {\n    return (\n      <div id=\"quiz-results-view\">\n        <h2>Quiz Terminé !</h2>\n        <p>Votre score est de : {score} / {questions.length}</p>\n        <button onClick={() => navigateTo('library')}>Retour à la Bibliothèque</button>\n      </div>\n    );\n  }\n\n  return (\n    <div id=\"quiz-view\">\n      <div className=\"quiz-header\">\n        <button onClick={() => navigateTo('library')}>← Bibliothèque</button>\n        <h2>Quiz</h2>\n      </div>\n      <div id=\"quiz-progress-bar\">\n        <div id=\"quiz-progress-value\" style={{ width: `${((currentQuestionIndex + 1) / questions.length) * 100}%` }}></div>\n      </div>\n      <div id=\"quiz-container\">\n        <p id=\"quiz-question-text\">{currentQuestion.question}</p>\n        <div id=\"quiz-options-container\">\n          {currentQuestion.options.map((option, index) => {\n            let buttonClass = '';\n            if (selectedAnswer) {\n              if (option === currentQuestion.answer) { buttonClass = 'correct'; } \n              else if (option === selectedAnswer) { buttonClass = 'incorrect'; }\n            }\n            return (<button key={index} onClick={() => handleAnswerClick(option)} className={buttonClass} disabled={!!selectedAnswer}>{option}</button>);\n          })}\n        </div>\n        <div id=\"quiz-feedback\">{feedback}</div>\n        {selectedAnswer && <button id=\"next-question-btn\" onClick={handleNextQuestion}>Question suivante →</button>}\n      </div>\n    </div>\n  );\n}\n\nexport default QuizView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}