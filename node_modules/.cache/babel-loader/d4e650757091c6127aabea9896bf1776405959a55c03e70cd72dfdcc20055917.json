{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function LibraryView(_ref){let{navigateTo,allCards,itemsData}=_ref;const[selectedItem,setSelectedItem]=useState('');// --- NOUVEAUX ÉTATS ---\nconst[numQCM,setNumQCM]=useState(3);// Valeur par défaut\nconst[numQRU,setNumQRU]=useState(2);// Valeur par défaut\nconst sortedItems=Array.from(new Set(allCards.map(c=>c.deck).filter(Boolean))).sort((a,b)=>parseInt(a.split(':')[0],10)-parseInt(b.split(':')[0],10));sortedItems.unshift(\"500: Divers\");const handleGenerateQuiz=async()=>{if(!selectedItem||!itemsData[selectedItem])return;// Pour l'instant, on va juste afficher les valeurs dans une alerte\nalert(\"Lancement du quiz pour : \".concat(selectedItem,\"\\nQCM demand\\xE9s : \").concat(numQCM,\"\\nQRU demand\\xE9es : \").concat(numQRU));// La logique pour appeler l'API et naviguer vers la vue du quiz viendra ici.\n// Exemple :\n// const response = await fetch('/api/generate-questions', {\n//   method: 'POST',\n//   headers: { 'Content-Type': 'application/json' },\n//   body: JSON.stringify({ \n//     text: itemsData[selectedItem],\n//     numQCM,\n//     numQRU \n//   })\n// });\n// const quizData = await response.json();\n// setQuizQuestions(quizData.questions); // (il faudra passer cette fonction depuis App.js)\n// navigateTo('quiz');\n};return/*#__PURE__*/_jsxs(\"div\",{id:\"library-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"library-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigateTo('home'),children:\"\\u2190 Accueil\"}),/*#__PURE__*/_jsx(\"div\",{className:\"library-selector-container\",children:/*#__PURE__*/_jsxs(\"select\",{value:selectedItem,onChange:e=>setSelectedItem(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Choisir un item --\"}),sortedItems.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item,children:item},item))]})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"library-content-display\",children:selectedItem?/*#__PURE__*/_jsx(\"p\",{children:itemsData[selectedItem]||'Aucune note.'}):/*#__PURE__*/_jsx(\"p\",{children:\"Veuillez s\\xE9lectionner un item.\"})}),selectedItem&&itemsData[selectedItem]&&/*#__PURE__*/_jsxs(\"div\",{className:\"generation-options\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"QCM : \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:numQCM,onChange:e=>setNumQCM(parseInt(e.target.value))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"QRU : \",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:numQRU,onChange:e=>setNumQRU(parseInt(e.target.value))})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"library-actions-container\",children:selectedItem&&itemsData[selectedItem]&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"ia-btn\",onClick:handleGenerateQuiz,children:\"S'entra\\xEEner (Quiz IA)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ia-btn success\",children:\"Cr\\xE9er des cartes (IA)\"})]})})]});}export default LibraryView;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LibraryView","_ref","navigateTo","allCards","itemsData","selectedItem","setSelectedItem","numQCM","setNumQCM","numQRU","setNumQRU","sortedItems","Array","from","Set","map","c","deck","filter","Boolean","sort","a","b","parseInt","split","unshift","handleGenerateQuiz","alert","concat","id","children","className","onClick","value","onChange","e","target","item","type","min"],"sources":["/Users/xavier/mon-anki-perso/src/components/LibraryView.js"],"sourcesContent":["import React, { useState } from 'react';\n\nfunction LibraryView({ navigateTo, allCards, itemsData }) {\n  const [selectedItem, setSelectedItem] = useState('');\n  // --- NOUVEAUX ÉTATS ---\n  const [numQCM, setNumQCM] = useState(3); // Valeur par défaut\n  const [numQRU, setNumQRU] = useState(2); // Valeur par défaut\n\n  const sortedItems = Array.from(new Set(allCards.map(c => c.deck).filter(Boolean)))\n    .sort((a, b) => parseInt(a.split(':')[0], 10) - parseInt(b.split(':')[0], 10));\n  sortedItems.unshift(\"500: Divers\");\n\n  const handleGenerateQuiz = async () => {\n    if (!selectedItem || !itemsData[selectedItem]) return;\n\n    // Pour l'instant, on va juste afficher les valeurs dans une alerte\n    alert(`Lancement du quiz pour : ${selectedItem}\\nQCM demandés : ${numQCM}\\nQRU demandées : ${numQRU}`);\n    \n    // La logique pour appeler l'API et naviguer vers la vue du quiz viendra ici.\n    // Exemple :\n    // const response = await fetch('/api/generate-questions', {\n    //   method: 'POST',\n    //   headers: { 'Content-Type': 'application/json' },\n    //   body: JSON.stringify({ \n    //     text: itemsData[selectedItem],\n    //     numQCM,\n    //     numQRU \n    //   })\n    // });\n    // const quizData = await response.json();\n    // setQuizQuestions(quizData.questions); // (il faudra passer cette fonction depuis App.js)\n    // navigateTo('quiz');\n  };\n\n  return (\n    <div id=\"library-view\">\n      <div className=\"library-header\">\n        <button onClick={() => navigateTo('home')}>← Accueil</button>\n        <div className=\"library-selector-container\">\n          <select value={selectedItem} onChange={e => setSelectedItem(e.target.value)}>\n            <option value=\"\">-- Choisir un item --</option>\n            {sortedItems.map(item => (<option key={item} value={item}>{item}</option>))}\n          </select>\n        </div>\n      </div>\n      <div id=\"library-content-display\">\n        {selectedItem ? (<p>{itemsData[selectedItem] || 'Aucune note.'}</p>) : (<p>Veuillez sélectionner un item.</p>)}\n      </div>\n      \n      {/* --- NOUVELLE SECTION DE PERSONNALISATION --- */}\n      {selectedItem && itemsData[selectedItem] && (\n        <div className=\"generation-options\">\n          <label>QCM : <input type=\"number\" min=\"0\" value={numQCM} onChange={e => setNumQCM(parseInt(e.target.value))} /></label>\n          <label>QRU : <input type=\"number\" min=\"0\" value={numQRU} onChange={e => setNumQRU(parseInt(e.target.value))} /></label>\n        </div>\n      )}\n\n      <div id=\"library-actions-container\">\n        {selectedItem && itemsData[selectedItem] && (\n          <>\n            <button className=\"ia-btn\" onClick={handleGenerateQuiz}>S'entraîner (Quiz IA)</button>\n            <button className=\"ia-btn success\">Créer des cartes (IA)</button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default LibraryView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}